<!DOCTYPE html>
<html lang="en-gb">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Exercise 7</title>
    </head>
    <body>
        <div>
            <h1>Temperature Convertor</h1>
            <p>Temperature: <input id="tbxTemperatureC" type="text"> &#xB0;Celsius</p>
            <p><input id="btnConvertToFarenheit" type="button" value="Convert to Farenheit"></p>
            <div id="divContent">
                &nbsp;
            </div>
        </div>
        <script>
            window.addEventListener("load", function () {
                let btnConvertToFarenheit = document.getElementById("btnConvertToFarenheit");
                btnConvertToFarenheit.addEventListener("click", function () {
                    if (validSubmission()) {
                        let tbxTemperatureC = document.getElementById("tbxTemperatureC");
                        let temperatureC = parseFloat(tbxTemperatureC.value);
                        let divContent = document.getElementById("divContent");
                        divContent.innerHTML = "<p>" + Math.round(temperatureC * 1000) / 1000 + "&#xB0;Celsius &#x3D; "
                                + Math.round(celsiusToFahrenheit(temperatureC) * 1000) / 1000 + "&#xB0;Farenheit</p>";
                    }
                });
            });

            function celsiusToFahrenheit(c) {
                var f = c * 9 / 5 + 32;
                return f;
            }

            function validSubmission() {
                let tbxTemperatureC = document.getElementById("tbxTemperatureC");
                let temperatureC = tbxTemperatureC.value;
                let fail = "";
                if (temperatureC === "") {
                    fail += "You must enter a temperature in \xB0Celsius!\n";
                } else if (!(/^([+-]?([0-9]*[.])?[0-9]+)$/.test(temperatureC))) {
                    fail += "\'" + temperatureC + "\' is not a valid tempature!\n";
                    fail += "(The temperature must be a floating point number)\n";
                }
                if (fail !== "") {
                    alert(fail);
                    return false;
                }
                return true;
            }
        </script>
    </body>
</html>
