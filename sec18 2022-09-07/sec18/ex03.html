<!DOCTYPE html>
<html lang="en-gb">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Exercise 3</title>
        <style>
            table, td, th {
                border: thin black solid;
            }
        </style>
    </head>
    <body>
        <div>
            <h1>Capital Cities of Europe</h1>            
            <div id="divContent">
                &nbsp;
            </div>
        </div>
        <script>
            window.addEventListener("load", function () {
                let xhttp = new XMLHttpRequest();
                xhttp.onreadystatechange = function () {
                    if (this.readyState === 4 && this.status === 200) {
                        let jsonFileContents = this.responseText;
                        let jsonObject = JSON.parse(jsonFileContents);
                        let divContent = document.getElementById("divContent");
                        let tableHTML = "<table>";
                        tableHTML += "<tr><th>Country</th><th>Capital City</th></tr>";
                        for (let count = 0; count < jsonObject.length; count++) {
                            tableHTML += "<tr><td><code>" + jsonObject[count].country + "</code></td><td><code>"
                                    + jsonObject[count].capital + "</code></td></tr>";
                        }
                        tableHTML += "</table>";
                        divContent.innerHTML = tableHTML;
                    }
                };
                xhttp.open("GET", "capitals.json", true);
                xhttp.send();
            });
        </script>
    </body>
</html>
